import{d as R,r as c,a as U,o as q,c as B,b as r,w as s,e as b,u as n,f as p,g as E,E as f,h as o,i as N,l as S,m as F,_ as I}from"./index-Ba8PhKSB.js";import{u as M}from"./user-CswI-_sj.js";const T={class:"register-container"},$={class:"text-center mt-3"},j=R({__name:"register",setup(z){const _=E(),x=M(),u=c(!1),t=U({username:"",password:"",email:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},g=c(),v=async()=>{var m;try{await((m=g.value)==null?void 0:m.validate()),u.value=!0,await x.register(t),f.success("注册成功，请登录"),_.push("/login")}catch(e){console.error("注册错误:",e),e.message?f.error(e.message):f.error("注册失败")}finally{u.value=!1}};return(m,e)=>{const i=o("el-icon"),d=o("el-input"),a=o("el-form-item"),w=o("el-button"),y=o("el-link"),k=o("el-form"),C=o("el-card");return q(),B("div",T,[r(C,{class:"register-box"},{default:s(()=>[e[7]||(e[7]=b("h3",{class:"mb-4 text-center"},"用户注册",-1)),r(k,{ref_key:"formRef",ref:g,model:t,rules:V,"label-position":"top"},{default:s(()=>[r(a,{prop:"username"},{default:s(()=>[r(d,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),placeholder:"请输入用户名"},{prefix:s(()=>[r(i,null,{default:s(()=>[r(n(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(a,{prop:"password",class:"mb-2"},{default:s(()=>[r(d,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),type:"password",placeholder:"请输入密码"},{prefix:s(()=>[r(i,null,{default:s(()=>[r(n(S))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(a,{prop:"email"},{default:s(()=>[r(d,{modelValue:t.email,"onUpdate:modelValue":e[2]||(e[2]=l=>t.email=l),placeholder:"请输入邮箱"},{prefix:s(()=>[r(i,null,{default:s(()=>[r(n(F))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(a,null,{default:s(()=>[r(w,{type:"primary",loading:u.value,onClick:v,class:"register-button"},{default:s(()=>e[4]||(e[4]=[p(" 注册 ")])),_:1},8,["loading"]),b("div",$,[e[6]||(e[6]=p(" 已有账号？ ")),r(y,{type:"primary",onClick:e[3]||(e[3]=l=>n(_).push("/login"))},{default:s(()=>e[5]||(e[5]=[p(" 去登录 ")])),_:1})])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),G=I(j,[["__scopeId","data-v-c19fcdfe"]]);export{G as default};
